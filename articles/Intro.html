<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to package 'precautionary' • precautionary</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to package 'precautionary'">
<meta property="og:description" content="precautionary">
<meta property="og:image" content="https://github.com/dcnorris/precautionary/raw/main/docs/card.png">
<meta property="og:image:alt" content="Logo for precautionary package">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@davidcnorrismd">
<meta name="twitter:site" content="@davidcnorrismd">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">precautionary</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased version">0.2.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/DTP-vs-Korn94.html">DTP-vs-Korn94</a>
    </li>
    <li>
      <a href="../articles/FDA-proactive.html">How FDA can vet dose-escalation trials for safety</a>
    </li>
    <li>
      <a href="../articles/Intro.html">Introduction to package 'precautionary'</a>
    </li>
    <li>
      <a href="../articles/MCSE-Free.html">MCSE-Free CRM Performance and Safety Assessment</a>
    </li>
    <li>
      <a href="../articles/Safety-Schematic-via-CPE.html">Generalized dose-escalation safety schematics via Complete Path Enumeration (CPE)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/dcnorris/precautionary/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="Intro_files/accessible-code-block-0.0.1/empty-anchor.js"></script><script src="Intro_files/kePrint-0.0.1/kePrint.js"></script><link href="Intro_files/lightable-0.0.1/lightable.css" rel="stylesheet">
<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to package ‘precautionary’</h1>
                        <h4 class="author">David C. Norris</h4>
            
            <h4 class="date">7/31/2020</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/dcnorris/precautionary/blob/master/vignettes/Intro.Rmd"><code>vignettes/Intro.Rmd</code></a></small>
      <div class="hidden name"><code>Intro.Rmd</code></div>

    </div>

    
    
<div id="basics" class="section level1">
<h1 class="hasAnchor">
<a href="#basics" class="anchor"></a>Basics</h1>
<p>In package <a href="https://CRAN.R-project.org/package=escalation">escalation</a>, you can simulate a 3 + 3 design as follows:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">escalation</span><span class="op">)</span>
<span class="co"># Design a 3 + 3 trial, with 5 pre-specified doses to escalate through</span>
<span class="va">design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/escalation/man/get_three_plus_three.html">get_three_plus_three</a></span><span class="op">(</span>num_doses <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="co"># Posit a scenario where these 5 doses cause dose-limiting toxicities</span>
<span class="co"># (DLTs) in 12%, 27%, etc. of the population:</span>
<span class="va">scenario</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.12</span>, <span class="fl">0.27</span>, <span class="fl">0.44</span>, <span class="fl">0.53</span>, <span class="fl">0.57</span><span class="op">)</span>
<span class="va">design</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/simulate_trials.html">simulate_trials</a></span><span class="op">(</span> <span class="co"># Feed the design to the simulator ...</span>
  num_sims <span class="op">=</span> <span class="fl">100</span>            <span class="co"># run 100 simulated trials</span>
, true_prob_tox <span class="op">=</span> <span class="va">scenario</span>  <span class="co"># under the chosen scenario,</span>
<span class="op">)</span> <span class="op">-&gt;</span> <span class="va">sims</span>                   <span class="co"># and store the results.</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">sims</span><span class="op">)</span> <span class="co"># summarize simulation results</span></code></pre></div>
<table class="table">
<caption>
Simulation summary as produced by package <code>escalation</code>.
</caption>
<thead><tr>
<th style="text-align:left;">
dose
</th>
<th style="text-align:right;">
tox
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
true_prob_tox
</th>
<th style="text-align:right;">
prob_recommend
</th>
<th style="text-align:right;">
prob_administer
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
NoDose
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.16
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
4.02
</td>
<td style="text-align:right;">
0.12
</td>
<td style="text-align:right;">
0.32
</td>
<td style="text-align:right;">
0.3839542
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:right;">
0.87
</td>
<td style="text-align:right;">
3.60
</td>
<td style="text-align:right;">
0.27
</td>
<td style="text-align:right;">
0.42
</td>
<td style="text-align:right;">
0.3438395
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:right;">
1.04
</td>
<td style="text-align:right;">
2.37
</td>
<td style="text-align:right;">
0.44
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
0.2263610
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
0.21
</td>
<td style="text-align:right;">
0.45
</td>
<td style="text-align:right;">
0.53
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
0.0429799
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.03
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0028653
</td>
</tr>
</tbody>
</table>
<p>From Table @ref(tab:basic-sim), we learn a few things of interest. For example, we see that, with the lowest dose being too toxic for 12% of the population, under this scenario there is a real chance even this dose will be rejected by our trial. Conversely, we also find it is not impossible for our trial to recommend a dose that is toxic to nearly half the population. Note also that, by summing the <span class="math inline">\(n\)</span> column, we can estimate expected enrollment at 10.47, which perhaps informs us about the expected cost or duration of our trial.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
<p>But simulations such as these cannot answer crucial questions about <strong>trial safety</strong>, mainly because the simulation machinery recognizes no notion of <em>graded toxicity</em>. The binary (yes/no) toxicities in the simulation machinery of <code>escalation</code> regard Grade 5 (fatal) toxicities no differently from Grade 3.</p>
<div id="introducing-realistic-pharmacologic-thinking" class="section level2">
<h2 class="hasAnchor">
<a href="#introducing-realistic-pharmacologic-thinking" class="anchor"></a>Introducing realistic pharmacologic thinking</h2>
<p>The <code>precautionary</code> package solves this problem by pursuing a <em>realistic</em> approach to pharmacologic thinking. Rather than plucking a sequence of toxicity probabilities out of thin air, this approach <strong>derives</strong> such probabilities according to how a latent toxicity threshold is distributed in the population.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dcnorris/precautionary">precautionary</a></span><span class="op">)</span>
<span class="va">mtdi_dist</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mtdi_lognormal-class.html">mtdi_lognormal</a></span><span class="op">(</span>CV <span class="op">=</span> <span class="fl">2</span>          <span class="co"># coefficient of variation</span>
                           ,median <span class="op">=</span> <span class="fl">5</span>      <span class="co"># median DLT threshold</span>
                           ,units <span class="op">=</span> <span class="st">"mg/kg"</span> <span class="co"># real doses have units!</span>
                           <span class="op">)</span></code></pre></div>
<p>Likewise, the pre-specified doses for our dose-escalation design must be specified as actual doses. With package <code>precautionary</code>, this is accomplished by setting a <code>dose_levels</code> option:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>dose_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">4</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span> <span class="co"># specify actual dosing</span></code></pre></div>
<p>A plot of the <span class="math inline">\(\mathrm{MTD}_i\)</span> distribution makes clear the connection with toxicity probabilities:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">mtdi_dist</span><span class="op">)</span></code></pre></div>
<p><img src="Intro_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">probs</span> <span class="op">&lt;-</span> <span class="va">mtdi_dist</span><span class="op">@</span><span class="va">dist</span><span class="op">$</span><span class="fu">cdf</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span><span class="st">'dose_levels'</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">probs</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html">getOption</a></span><span class="op">(</span><span class="st">'dose_levels'</span><span class="op">)</span>, <span class="va">mtdi_dist</span><span class="op">@</span><span class="va">units</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="va">probs</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">kable</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">4</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:right;">
0.5 mg/kg
</th>
<th style="text-align:right;">
1 mg/kg
</th>
<th style="text-align:right;">
2 mg/kg
</th>
<th style="text-align:right;">
4 mg/kg
</th>
<th style="text-align:right;">
6 mg/kg
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:right;">
0.0348
</td>
<td style="text-align:right;">
0.1023
</td>
<td style="text-align:right;">
0.2351
</td>
<td style="text-align:right;">
0.4302
</td>
<td style="text-align:right;">
0.5571
</td>
</tr></tbody>
</table>
</div>
<div id="extending-escalation-to-support-the-mathrmmtd_i-concept" class="section level2">
<h2 class="hasAnchor">
<a href="#extending-escalation-to-support-the-mathrmmtd_i-concept" class="anchor"></a>Extending <code>escalation</code> to support the <span class="math inline">\(\mathrm{MTD}_i\)</span> concept</h2>
<p>Package <code>precautionary</code> provides additional methods for <code>escalation</code> functions, so that an <code>mtdi_distribution</code> may be used instead of out-of-thin-air probabilities:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/simulate_trials.html">simulate_trials</a></span><span class="op">(</span>
  num_sims <span class="op">=</span> <span class="fl">100</span>
, true_prob_tox <span class="op">=</span> <span class="va">mtdi_dist</span> <span class="co"># pull tox probs from a MODEL, not thin air</span>
<span class="op">)</span> <span class="op">-&gt;</span> <span class="va">SIMS</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">SIMS</span><span class="op">)</span></code></pre></div>
<table class="table">
<caption>
A simulation summary under the MTD<span class="math inline">\(_i\)</span> regime of package <code>precautionary</code>.
</caption>
<thead><tr>
<th style="text-align:left;">
dose
</th>
<th style="text-align:right;">
dose (mg/kg)
</th>
<th style="text-align:right;">
tox
</th>
<th style="text-align:right;">
n
</th>
<th style="text-align:right;">
true_prob_tox
</th>
<th style="text-align:right;">
prob_recommend
</th>
<th style="text-align:right;">
prob_administer
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
NoDose
</td>
<td style="text-align:right;">
0.0
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.0000000
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
0.0000000
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:right;">
0.5
</td>
<td style="text-align:right;">
0.09
</td>
<td style="text-align:right;">
3.24
</td>
<td style="text-align:right;">
0.0347613
</td>
<td style="text-align:right;">
0.10
</td>
<td style="text-align:right;">
0.2347826
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.40
</td>
<td style="text-align:right;">
3.75
</td>
<td style="text-align:right;">
0.1022854
</td>
<td style="text-align:right;">
0.31
</td>
<td style="text-align:right;">
0.2717391
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
0.83
</td>
<td style="text-align:right;">
3.54
</td>
<td style="text-align:right;">
0.2350660
</td>
<td style="text-align:right;">
0.41
</td>
<td style="text-align:right;">
0.2565217
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:right;">
4.0
</td>
<td style="text-align:right;">
1.08
</td>
<td style="text-align:right;">
2.61
</td>
<td style="text-align:right;">
0.4301892
</td>
<td style="text-align:right;">
0.15
</td>
<td style="text-align:right;">
0.1891304
</td>
</tr>
<tr>
<td style="text-align:left;">
5
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:right;">
0.39
</td>
<td style="text-align:right;">
0.66
</td>
<td style="text-align:right;">
0.5571371
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.0478261
</td>
</tr>
</tbody>
</table>
<p>Judging from Table @ref(tab:MTDi-regime), however, introducing the <span class="math inline">\(\mathrm{MTD}_i\)</span> concept has by itself generated little progress. The only apparent improvement compared with Table @ref(tab:basic-sim) is the addition of a column with <em>actual</em> doses. To make further progress <em>while continuing to operate within the dose-escalation paradigm</em>, we need to introduce another concept.</p>
</div>
<div id="introducing-graded-toxicities" class="section level2">
<h2 class="hasAnchor">
<a href="#introducing-graded-toxicities" class="anchor"></a>Introducing graded toxicities</h2>
<p>When its full implications are allowed to develop, the latent toxicity threshold <span class="math inline">\(\mathrm{MTD}_i\)</span> has far-reaching consequences for the design of dose-finding trials. Indeed, it forms the conceptual basis for dose-<em>titration</em> designs that abandon cohortwise dose-escalation altogether <span class="citation">(Norris 2017a, 2017b)</span>.</p>
<p>For present purposes, however, we take it for granted that (for whatever reason) we have chosen to employ a dose-escalation design. That choice effectively discards the core insight of <span class="math inline">\(\mathrm{MTD}_i\)</span>, and relegates the <span class="math inline">\(\mathrm{MTD}_i\)</span> concept <em>standing alone</em> to the status of a mere formalism. But in conjunction with <em>a dose scaling that links different toxicity grades at the individual level</em>, the <span class="math inline">\(\mathrm{MTD}_i\)</span> can be rehabilitated as an effective tool, even within the confines of a dose-escalation design. In package <code>precautionary</code>, such scaling functions are called ‘ordinalizers’, and may be applied at the time when simulations are summarized:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tox_threshold_scaling</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">MTDi</span>, <span class="va">r0</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">MTDi</span> <span class="op">*</span> <span class="va">r0</span> <span class="op">^</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>Gr1<span class="op">=</span><span class="op">-</span><span class="fl">2</span>, Gr2<span class="op">=</span><span class="op">-</span><span class="fl">1</span>, Gr3<span class="op">=</span><span class="fl">0</span>, Gr4<span class="op">=</span><span class="fl">1</span>, Gr5<span class="op">=</span><span class="fl">2</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">SIMS</span>
       ,ordinalizer <span class="op">=</span> <span class="va">tox_threshold_scaling</span>
       ,r0 <span class="op">=</span> <span class="fl">2</span>      <span class="co"># supply a value for ordinalizer's r0 parameter</span>
       <span class="op">)</span><span class="op">$</span><span class="va">safety</span> <span class="op">%&gt;%</span> <span class="co"># select the 'safety' component of the summary</span>
  <span class="fu"><a href="../reference/safety_kable.html">safety_kable</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table table">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Expected counts per toxicity grade
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
None
</th>
<th style="text-align:right;">
Gr1
</th>
<th style="text-align:right;">
Gr2
</th>
<th style="text-align:right;">
Gr3
</th>
<th style="text-align:right;">
Gr4
</th>
<th style="text-align:right;">
Gr5
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody><tr>
<td style="text-align:right;">
6
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
2
</td>
<td style="text-align:right;">
1.2
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
14
</td>
</tr></tbody>
</table>
<p>Clearly, we have now made some genuine progress. Of special interest from a safety perspective are the numbers of Grade 4 (severe) and Grade 5 (fatal) toxicities expected in the trial.</p>
</div>
<div id="a-closer-look-at-the-ordinalizer" class="section level2">
<h2 class="hasAnchor">
<a href="#a-closer-look-at-the-ordinalizer" class="anchor"></a>A closer look at the <em>ordinalizer</em>
</h2>
<p>Let us unroll the ordinalizer above, to make it less cryptic:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tox_threshold_scaling</span> <span class="op">&lt;-</span>
  <span class="kw">function</span><span class="op">(</span><span class="va">MTDi</span>   <span class="co"># An ordinalizer is a function of a dose threshold,</span>
          ,<span class="va">r0</span> <span class="op">=</span> <span class="fl">2</span> <span class="co"># and in general has additional parameters as well.</span>
          <span class="op">)</span> <span class="op">{</span>
    <span class="co"># An ordinalizer assumes we start with a binary toxicity notion,</span>
    <span class="co"># and maps that to a *graded* notion of toxicity by means of a</span>
    <span class="co"># transformation in 'dose-space'.</span>
    <span class="co"># Assuming the default value r0 = 2 provided in its definition,</span>
    <span class="co"># this ordinalizer says that an individual whose dose threshold</span>
    <span class="co"># for the binary toxicity is MTDi has thresholds ...</span>
    <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>Gr1 <span class="op">=</span> <span class="va">MTDi</span> <span class="op">/</span> <span class="va">r0</span><span class="op">^</span><span class="fl">2</span> <span class="co"># at MTDi/4 for Gr1,</span>
     ,Gr2 <span class="op">=</span> <span class="va">MTDi</span> <span class="op">/</span> <span class="va">r0</span>   <span class="co"># at MTDi/2 for Gr2,</span>
     ,Gr3 <span class="op">=</span> <span class="va">MTDi</span>        <span class="co"># at MTDi for Gr3 ('tox' is defined as Gr3+),</span>
     ,Gr4 <span class="op">=</span> <span class="va">MTDi</span> <span class="op">*</span> <span class="va">r0</span>   <span class="co"># at 2*MTDi for Gr4,</span>
     ,Gr5 <span class="op">=</span> <span class="va">MTDi</span> <span class="op">*</span> <span class="va">r0</span><span class="op">^</span><span class="fl">2</span> <span class="co"># at 4*MTDi for Gr5.</span>
    <span class="op">)</span>
  <span class="op">}</span></code></pre></div>
<p>In general, an ordinalizer returns a named vector<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> that links the different dose thresholds at which an individual will experience each grade of toxicity. In <span class="citation">(Norris 2020)</span>, these concepts are laid out in terms of <span class="math inline">\(\MTDig\)</span> with the index <span class="math inline">\(g\)</span> running over toxicity grades:</p>
<p><span class="math display">\[
\mathrm{MTD}_i^{,} g \in \{1,...,5\},
\]</span></p>
<p>and defined as the dose threshold where a grade-<span class="math inline">\((g-1)\)</span> toxicity would convert to grade-<span class="math inline">\(g\)</span>.<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> Thus, in the usual case where the binary ‘dose-limiting toxicity’ (DLT) of a dose-escalation design is defined as CTCAE Grade ≥ 3, we identify ‘<span class="math inline">\(\mathrm{MTD}_i\)</span>’ with <span class="math inline">\(\MTDig[3]\)</span> .</p>
</div>
<div id="taking-stock-of-parameter-counts" class="section level2">
<h2 class="hasAnchor">
<a href="#taking-stock-of-parameter-counts" class="anchor"></a>Taking stock of parameter counts</h2>
<p>It might seem that the benefits of package <code>precautionary</code> come at the cost of having to pre-specify many additional parameters. <em>Au contraire!</em> In the example above, the <code>CV</code> and <code>median</code> parameters of <code>mtdi_dist</code> <strong>replaced</strong> the 5 ‘true toxicity probabilities’ that the package-<code>escalation</code> approach requires you to pluck out of thin air. Thus, immediately we have saved 3 parameters. From this savings, we then spent only 1 on the single parameter <code>r0</code> of our simple ordinalizer. Indeed, if we had wished to spend all of our ‘parameter savings’, we could have specified an ordinalizer such as:<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">function</span><span class="op">(</span><span class="va">MTDi3</span>, <span class="va">r12</span>, <span class="va">r4</span>, <span class="va">r5</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>Gr1 <span class="op">=</span> <span class="va">MTDi3</span> <span class="op">/</span> <span class="va">r12</span><span class="op">^</span><span class="fl">2</span>
   ,Gr2 <span class="op">=</span> <span class="va">MTDi3</span> <span class="op">/</span> <span class="va">r12</span>
   ,Gr3 <span class="op">=</span> <span class="va">MTDi3</span>
   ,Gr4 <span class="op">=</span> <span class="va">MTDi3</span> <span class="op">*</span> <span class="va">r4</span>
   ,Gr5 <span class="op">=</span> <span class="va">MTDi3</span> <span class="op">*</span> <span class="va">r4</span><span class="op">*</span><span class="va">r5</span>
   <span class="op">)</span>
<span class="op">}</span></code></pre></div>
<p>As we count design parameters, we also ought not overlook the pre-specified dose levels themselves, which are indeed parameters of our design. But package <code>precautionary</code> changes the manner in which these parameters enter into simulation-based trial design. In the usual approach, every new set of pre-specified dose levels requires its own set of ‘true toxicity probabilities’ to be pulled anew out of thin air. But in package <code>precautionary</code>, the linkage between dose levels and probabilities is provided through a model. In theory, this would allow us to obtain our dose levels as <em>results</em> of simulation-based design, instead of providing them as <em>inputs</em>.</p>
</div>
</div>
<div id="modeling-uncertainty" class="section level1">
<h1 class="hasAnchor">
<a href="#modeling-uncertainty" class="anchor"></a>Modeling uncertainty</h1>
<p>When you ask people to start thinking, sometimes they keep going. No sooner will you have elicited values for the <code>CV</code> and <code>median</code> parametrizing a lognormal <span class="math inline">\(\mathrm{MTD}_i\)</span> distribution</p>
<p><span class="math display">\[
\begin{align}
\log \mathrm{MTD}_i &amp;\sim \mathscr{N}(\mu, \sigma^2)
\\
\mu &amp;\equiv \log(\mathrm{median})
\\
\sigma^2 &amp;\equiv \log (1+\mathrm{CV}^2),
\end{align}
\]</span></p>
<p>than you will hear about the uncertainty in these values themselves. You can model this uncertainty by introducing <em>hyperparameters</em> <span class="math inline">\(\sigma_{\mathrm{CV}}\)</span> and <span class="math inline">\(\sigma_{\mathrm{med}}\)</span>:</p>
<p><span class="math display">\[
\begin{align}
\mu &amp;\sim \mathscr{N}(\log \mathrm{median}, \sigma_{\mathrm{med}}^2)
\\
\mathrm{CV} &amp;\sim \mathscr{R}(\sigma_{\mathrm{CV}})
\end{align}
\]</span></p>
<p>Here, <span class="math inline">\(\sigma_{\mathrm{med}}\)</span> expresses <em>in relative terms</em><a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> our uncertainty about the median of <span class="math inline">\(\mathrm{MTD}_i\)</span>, while <span class="math inline">\(\sigma_{\mathrm{CV}}\)</span> is the parameter of the <a href="https://en.wikipedia.org/wiki/Rayleigh_distribution">Raleigh distribution</a>:</p>
<p><img src="Intro_files/figure-html/Raleigh-distribution-1.png" width="576"></p>
<p>Happily, the Raleigh distribution’s <span class="math inline">\(\sigma\)</span> parameter coincides with its <em>mode</em> (likeliest value), and its standard deviation is about <span class="math inline">\(\frac{2}{3} \sigma\)</span>, which seems a reasonable degree of relative uncertainty about CV(<span class="math inline">\(\mathrm{MTD}_i\)</span>).<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> We take advantage of this when we implement these features in package <code>precautionary</code>, avoiding the need to ask users to specify a separate uncertainty parameter for CV:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mtdi_gen</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/hyper_mtdi_lognormal-class.html">hyper_mtdi_lognormal</a></span><span class="op">(</span>CV <span class="op">=</span> <span class="fl">1</span>
                                ,median_mtd <span class="op">=</span> <span class="fl">5</span>
                                ,median_sdlog <span class="op">=</span> <span class="fl">0.5</span> <span class="co"># this is new</span>
                                ,units<span class="op">=</span><span class="st">"mg/kg"</span>
                                <span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">mtdi_gen</span>, n<span class="op">=</span><span class="fl">100</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/adjustcolor.html">adjustcolor</a></span><span class="op">(</span><span class="st">"red"</span>, alpha<span class="op">=</span><span class="fl">0.25</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<div class="figure">
<img src="Intro_files/figure-html/hyperprior-1.png" alt="Multiple samples from a *hyperprior* over the distribution of MTD$_i$. Consider the implications for the customary practice of pulling 'true toxicity probabilities' out of thin air!" width="576"><p class="caption">
Multiple samples from a <em>hyperprior</em> over the distribution of MTD<span class="math inline">\(_i\)</span>. Consider the implications for the customary practice of pulling ‘true toxicity probabilities’ out of thin air!
</p>
</div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">design</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/simulate_trials.html">simulate_trials</a></span><span class="op">(</span>
  num_sims <span class="op">=</span> <span class="fl">400</span>
, true_prob_tox <span class="op">=</span> <span class="va">mtdi_gen</span> <span class="co"># pull tox probs from MANY models</span>
<span class="op">)</span> <span class="op">-&gt;</span> <span class="va">HYPERSIMS</span>

<span class="co"># As a convenience, package 'precautionary' lets you set the</span>
<span class="co"># ordinalizer as an *option* so that you don't have to keep</span>
<span class="co"># specifying it as an argument to summary(). By providing a</span>
<span class="co"># default setting for the r0 parameter in the ordinalizer</span>
<span class="co"># definition, we avoid having to keep specifying that, too.</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>ordinalizer <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">MTDi</span>, <span class="va">r0</span> <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">MTDi</span> <span class="op">*</span> <span class="va">r0</span> <span class="op">^</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>Gr1<span class="op">=</span><span class="op">-</span><span class="fl">2</span>, Gr2<span class="op">=</span><span class="op">-</span><span class="fl">1</span>, Gr3<span class="op">=</span><span class="fl">0</span>, Gr4<span class="op">=</span><span class="fl">1</span>, Gr5<span class="op">=</span><span class="fl">2</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">HYPERSIMS</span><span class="op">)</span><span class="op">$</span><span class="va">safety</span></code></pre></div>
<table class="table table">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Expected counts per toxicity grade
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
None
</th>
<th style="text-align:right;">
Gr1
</th>
<th style="text-align:right;">
Gr2
</th>
<th style="text-align:right;">
Gr3
</th>
<th style="text-align:right;">
Gr4
</th>
<th style="text-align:right;">
Gr5
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody><tr>
<td style="text-align:right;">
9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
1.1
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
0.6
</td>
<td style="text-align:right;">
14
</td>
</tr></tbody>
</table>
<div id="uncertainty-about-the-ordinalizer" class="section level2">
<h2 class="hasAnchor">
<a href="#uncertainty-about-the-ordinalizer" class="anchor"></a>Uncertainty about the ordinalizer</h2>
<p>What about our uncertainty over the parameter <span class="math inline">\(r_0\)</span>? Here, it seems entirely reasonable simply to explore a range of values:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">r0</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1.25</span>, <span class="fl">1.5</span>, <span class="fl">1.75</span>, <span class="fl">2.0</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/cbind.html">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">HYPERSIMS</span>, r0<span class="op">=</span><span class="va">r0</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">safety</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>
     ,<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">HYPERSIMS</span>, r0<span class="op">=</span><span class="va">r0</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">safety</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>
     ,<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">HYPERSIMS</span>, r0<span class="op">=</span><span class="va">r0</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">safety</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>
     ,<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">HYPERSIMS</span>, r0<span class="op">=</span><span class="va">r0</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">$</span><span class="va">safety</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span>
     <span class="op">)</span> <span class="op">-&gt;</span> <span class="va">safety</span>
<span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="fu">data.table</span><span class="op">(</span>`$r_0$` <span class="op">=</span> <span class="va">r0</span><span class="op">)</span>, <span class="va">safety</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu">kable</span><span class="op">(</span>digits<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu">add_header_above</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">" "</span><span class="op">=</span><span class="fl">1</span>, <span class="st">"Expected counts by toxicity grade"</span><span class="op">=</span><span class="fl">6</span>, <span class="st">" "</span><span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead>
<tr>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Expected counts by toxicity grade
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
<span class="math inline">\(r_0\)</span>
</th>
<th style="text-align:right;">
None
</th>
<th style="text-align:right;">
Gr1
</th>
<th style="text-align:right;">
Gr2
</th>
<th style="text-align:right;">
Gr3
</th>
<th style="text-align:right;">
Gr4
</th>
<th style="text-align:right;">
Gr5
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
1.25
</td>
<td style="text-align:right;">
10.29
</td>
<td style="text-align:right;">
0.85
</td>
<td style="text-align:right;">
0.74
</td>
<td style="text-align:right;">
0.65
</td>
<td style="text-align:right;">
0.55
</td>
<td style="text-align:right;">
1.18
</td>
<td style="text-align:right;">
14.27
</td>
</tr>
<tr>
<td style="text-align:right;">
1.50
</td>
<td style="text-align:right;">
8.81
</td>
<td style="text-align:right;">
1.67
</td>
<td style="text-align:right;">
1.41
</td>
<td style="text-align:right;">
1.12
</td>
<td style="text-align:right;">
0.64
</td>
<td style="text-align:right;">
0.61
</td>
<td style="text-align:right;">
14.27
</td>
</tr>
<tr>
<td style="text-align:right;">
1.75
</td>
<td style="text-align:right;">
7.48
</td>
<td style="text-align:right;">
2.36
</td>
<td style="text-align:right;">
2.05
</td>
<td style="text-align:right;">
1.42
</td>
<td style="text-align:right;">
0.57
</td>
<td style="text-align:right;">
0.39
</td>
<td style="text-align:right;">
14.27
</td>
</tr>
<tr>
<td style="text-align:right;">
2.00
</td>
<td style="text-align:right;">
6.32
</td>
<td style="text-align:right;">
2.95
</td>
<td style="text-align:right;">
2.61
</td>
<td style="text-align:right;">
1.59
</td>
<td style="text-align:right;">
0.55
</td>
<td style="text-align:right;">
0.23
</td>
<td style="text-align:right;">
14.27
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="beyond-3-3" class="section level1">
<h1 class="hasAnchor">
<a href="#beyond-3-3" class="anchor"></a>Beyond 3 + 3</h1>
<p>One reason that package <code>escalation</code> makes such a suitable basis for these developments is that it unifies several dose-escalation designs under one object-oriented design. Thus, we can repeat the above simulation exercise with a CRM design:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">crm_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/escalation/man/get_dfcrm.html">get_dfcrm</a></span><span class="op">(</span>skeleton <span class="op">=</span> <span class="va">scenario</span>, target <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/escalation/man/stop_at_n.html">stop_at_n</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">24</span><span class="op">)</span>
<span class="va">crm_design</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/simulate_trials.html">simulate_trials</a></span><span class="op">(</span>
  num_sims <span class="op">=</span> <span class="fl">200</span>
, true_prob_tox <span class="op">=</span> <span class="va">mtdi_gen</span>
<span class="op">)</span> <span class="op">-&gt;</span> <span class="va">CRM_HYPERSIMS</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">CRM_HYPERSIMS</span><span class="op">)</span><span class="op">$</span><span class="va">safety</span></code></pre></div>
<table class="table table">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Expected counts per toxicity grade
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
None
</th>
<th style="text-align:right;">
Gr1
</th>
<th style="text-align:right;">
Gr2
</th>
<th style="text-align:right;">
Gr3
</th>
<th style="text-align:right;">
Gr4
</th>
<th style="text-align:right;">
Gr5
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody><tr>
<td style="text-align:right;">
12
</td>
<td style="text-align:right;">
4
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2.3
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
1.6
</td>
<td style="text-align:right;">
24.0
</td>
</tr></tbody>
</table>
<p>The BOIN design of <span class="citation">(Liu and Yuan 2015)</span> is also supported:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">boin_design</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/escalation/man/get_boin.html">get_boin</a></span><span class="op">(</span>num_doses <span class="op">=</span> <span class="fl">5</span>, target <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://rdrr.io/pkg/escalation/man/stop_at_n.html">stop_at_n</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">24</span><span class="op">)</span>
<span class="va">boin_design</span> <span class="op">%&gt;%</span> <span class="fu"><a href="../reference/simulate_trials.html">simulate_trials</a></span><span class="op">(</span>
  num_sims <span class="op">=</span> <span class="fl">200</span>
, true_prob_tox <span class="op">=</span> <span class="va">mtdi_gen</span>
<span class="op">)</span> <span class="op">-&gt;</span> <span class="va">BOIN_HYPERSIMS</span>

<span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">BOIN_HYPERSIMS</span><span class="op">)</span><span class="op">$</span><span class="va">safety</span></code></pre></div>
<table class="table table">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="6">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Expected counts per toxicity grade
</div>
</th>
<th style="empty-cells: hide;border-bottom:hidden;" colspan="1">
</th>
</tr>
<tr>
<th style="text-align:right;">
None
</th>
<th style="text-align:right;">
Gr1
</th>
<th style="text-align:right;">
Gr2
</th>
<th style="text-align:right;">
Gr3
</th>
<th style="text-align:right;">
Gr4
</th>
<th style="text-align:right;">
Gr5
</th>
<th style="text-align:right;">
Total
</th>
</tr>
</thead>
<tbody><tr>
<td style="text-align:right;">
14
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
1.8
</td>
<td style="text-align:right;">
1.2
</td>
<td style="text-align:right;">
1.2
</td>
<td style="text-align:right;">
24.0
</td>
</tr></tbody>
</table>
</div>
<div id="implications-of-package-precautionary" class="section level1">
<h1 class="hasAnchor">
<a href="#implications-of-package-precautionary" class="anchor"></a>Implications of package <code>precautionary</code>
</h1>
<p>Package <code>precautionary</code> demonstrates in principle that any dose-escalation design can be assessed for safety, given a modicum of realistic pharmacologic thinking during prior elicitation. How truly modest this additional input is, should be apparent from the obvious connections between the ratios in an ‘ordinalizer’ and the notion of <a href="https://en.wikipedia.org/wiki/Therapeutic_index">therapeutic index</a> (TI). It is hard to imagine that any trialist would pursue a phase 1 investigation without some notion of a plausible range for TI <span class="citation">(Muller and Milton 2012)</span>. Yet within the biostatistical literature on dose-finding methods, I know of no attempt to apply a TI concept formally to assess design safety.</p>
</div>
<div id="references" class="section level1 unnumbered">
<h1 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h1>
<div id="refs" class="references">
<div id="ref-liu_bayesian_2015">
<p>Liu, Suyu, and Ying Yuan. 2015. “Bayesian Optimal Interval Designs for Phase I Clinical Trials.” <em>Journal of the Royal Statistical Society: Series C (Applied Statistics)</em> 64 (3): 507–23. <a href="https://doi.org/10.1111/rssc.12089">https://doi.org/10.1111/rssc.12089</a>.</p>
</div>
<div id="ref-muller_determination_2012">
<p>Muller, Patrick Y., and Mark N. Milton. 2012. “The Determination and Interpretation of the Therapeutic Index in Drug Development.” <em>Nature Reviews. Drug Discovery</em> 11 (10): 751–61. <a href="https://doi.org/10.1038/nrd3801">https://doi.org/10.1038/nrd3801</a>.</p>
</div>
<div id="ref-norris_dose_2017">
<p>Norris, David C. 2017a. “Dose Titration Algorithm Tuning (DTAT) Should Supersede ‘the’ Maximum Tolerated Dose (MTD) in Oncology Dose-Finding Trials.” <em>F1000Research</em> 6 (July): 112. <a href="https://doi.org/10.12688/f1000research.10624.3">https://doi.org/10.12688/f1000research.10624.3</a>.</p>
</div>
<div id="ref-norris_precautionary_2017">
<p>———. 2017b. “Precautionary Coherence Unravels Dose Escalation Designs.” <em>bioRxiv</em>, December. <a href="https://doi.org/10.1101/240846">https://doi.org/10.1101/240846</a>.</p>
</div>
<div id="ref-norris_retrospective_2020">
<p>———. 2020. “Retrospective Analysis of a Fatal Dose-Finding Trial.” <em>arXiv:2004.12755 [stat.ME]</em>, April. <a href="https://arxiv.org/abs/2004.12755">https://arxiv.org/abs/2004.12755</a>.</p>
</div>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>Any complete simulation study will of course consider multiple scenarios, perhaps weighted according to their varying likelihood.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>The names allow for user-customized labeling of the toxicity levels, which carries forward into summaries, etc.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>To preserve the intuition of the term ‘maximum tolerated dose’, you could say <span class="math inline">\(\MTDig\)</span> is the maximum dose that individual <span class="math inline">\(i\)</span> can tolerate if ‘tolerability’ is defined as toxicity <em>below</em> grade-<span class="math inline">\(g\)</span>.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p>Note the judicious allocation of parameters. This ordinalizer devotes 2 parameters (<code>r4</code> and <code>r5</code>) to the safety-critical threshold ratios <span class="math inline">\(r_4 := \mathrm{MTD}_i^3 : \mathrm{MTD}_i^4\)</span> and <span class="math inline">\(r_5 := \mathrm{MTD}_i^3 : \mathrm{MTD}_i^4\)</span>, but conserves on parameters by sharing the same parameter <span class="math inline">\(r_{12}\)</span> for the ratios involving low-grade toxicities.<a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>For example, setting <span class="math inline">\(\sigma_{\mathrm{med}} = 0.5\)</span> would express a ±50% uncertainty in our guessed median <span class="math inline">\(\mathrm{MTD}_i\)</span>.<a href="#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>The exact figure is <span class="math inline">\(\sqrt{2-\pi/2} \approx 0.655\)</span>. Given how little is known generally—or even acknowledged!—about inter-individual variation in optimal dosing, it seems reasonable to suppose that you will allow a ± of 66% on any value you choose as most likely for <span class="math inline">\(\mathrm{CV}(\mathrm{MTD}_i)\)</span>.<a href="#fnref6" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by David C. Norris.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
