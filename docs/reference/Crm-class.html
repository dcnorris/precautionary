<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>An R6 class encapsulating CRM models

This class wraps the functionality of package dfcrm, adding
efficient Rust implementations of some numerical routines. — Crm-class • precautionary</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="An R6 class encapsulating CRM models

This class wraps the functionality of package dfcrm, adding
efficient Rust implementations of some numerical routines. — Crm-class" />
<meta property="og:description" content="An R6 class encapsulating CRM models
This class wraps the functionality of package dfcrm, adding
efficient Rust implementations of some numerical routines.
An R6 class encapsulating CRM models
This class wraps the functionality of package dfcrm, adding
efficient Rust implementations of some numerical routines." />
<meta property="og:image" content="/reference/figures/card.png" />
<meta property="og:image:alt" content="Logo for precautionary package" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:creator" content="@davidcnorrismd" />
<meta name="twitter:site" content="@davidcnorrismd" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">precautionary</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3-1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/DTP-vs-Korn94.html">DTP-vs-Korn94</a>
    </li>
    <li>
      <a href="../articles/FDA-proactive.html">How FDA can vet dose-escalation trials for safety</a>
    </li>
    <li>
      <a href="../articles/Intro.html">Introduction to package 'precautionary'</a>
    </li>
    <li>
      <a href="../articles/MCSE-Free.html">MCSE-Free CRM Performance and Safety Assessment</a>
    </li>
    <li>
      <a href="../articles/Safety-Schematic-via-DTP.html">Generalized dose-escalation safety schematics via Dose Transition Pathways (DTP)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>An R6 class encapsulating CRM models

This class wraps the functionality of package <a href='https://CRAN.R-project.org/package=dfcrm'><span class="pkg">dfcrm</span></a>, adding
efficient Rust implementations of some numerical routines.</h1>
    
    <div class="hidden name"><code>Crm-class.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>An R6 class encapsulating CRM models</p>
<p>This class wraps the functionality of package <a href='https://CRAN.R-project.org/package=dfcrm'><span class="pkg">dfcrm</span></a>, adding
efficient Rust implementations of some numerical routines.</p>
<p>An R6 class encapsulating CRM models</p>
<p>This class wraps the functionality of package <a href='https://CRAN.R-project.org/package=dfcrm'><span class="pkg">dfcrm</span></a>, adding
efficient Rust implementations of some numerical routines.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Syntactically, the method chaining supported by R6 classes makes the
invocation of CRM models more transparent. The mutability conferred
by reference semantics enables memoization (caching) of results, which
can speed up DTP calculations significantly.</p>
<p>Presently, this class supports only the 'empiric' (aka 'power') model.
But it is hoped that inheritance will assist in rendering other models
implemented in package <a href='https://CRAN.R-project.org/package=dfcrm'><span class="pkg">dfcrm</span></a> clearly, with code reuse.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Norris DC. What Were They Thinking? Pharmacologic priors implicit in
a choice of 3+3 dose-escalation design. arXiv:2012.05301 [stat.ME].
December 2020. <a href='https://arxiv.org/abs/2012.05301'>https://arxiv.org/abs/2012.05301</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>path_matrix</code>, <code>path_table</code>, <code>path_array</code>.</p>
<p><code>trace_paths</code>, which must already have been invoked
if this method is to return a meaningful result.</p>
<p><code>trace_paths</code>, which must already have been invoked
if this method is to return a result.</p></div>
    <h2 class="hasAnchor" id="public-fields"><a class="anchor" href="#public-fields"></a>Public fields</h2>

    <p><div class="r6-fields"></p><dl>
<dt><code>performance</code></dt><dd><p>A vector used for vetting performance</p></dd>

</dl><p></div></p>
    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>Crm$new()</code></a></p></li>
<li><p><a href='#method-skeleton'><code>Crm$skeleton()</code></a></p></li>
<li><p><a href='#method-dontcache'><code>Crm$dontcache()</code></a></p></li>
<li><p><a href='#method-report'><code>Crm$report()</code></a></p></li>
<li><p><a href='#method-stop_func'><code>Crm$stop_func()</code></a></p></li>
<li><p><a href='#method-no_skip_esc'><code>Crm$no_skip_esc()</code></a></p></li>
<li><p><a href='#method-no_skip_deesc'><code>Crm$no_skip_deesc()</code></a></p></li>
<li><p><a href='#method-global_coherent_esc'><code>Crm$global_coherent_esc()</code></a></p></li>
<li><p><a href='#method-conf_level'><code>Crm$conf_level()</code></a></p></li>
<li><p><a href='#method-observe'><code>Crm$observe()</code></a></p></li>
<li><p><a href='#method-tally'><code>Crm$tally()</code></a></p></li>
<li><p><a href='#method-est'><code>Crm$est()</code></a></p></li>
<li><p><a href='#method-applied'><code>Crm$applied()</code></a></p></li>
<li><p><a href='#method-trace_paths'><code>Crm$trace_paths()</code></a></p></li>
<li><p><a href='#method-path_matrix'><code>Crm$path_matrix()</code></a></p></li>
<li><p><a href='#method-path_array'><code>Crm$path_array()</code></a></p></li>
<li><p><a href='#method-path_probs'><code>Crm$path_probs()</code></a></p></li>
<li><p><a href='#method-path_rx'><code>Crm$path_rx()</code></a></p></li>
<li><p><a href='#method-clone'><code>Crm$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span><span class='va'>skeleton</span>, scale <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>1.34</span><span class='op'>)</span>, <span class='va'>target</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>skeleton</code></dt><dd><p>CRM skeleton</p></dd>

<dt><code>scale</code></dt><dd><p>Sigma parameter of prior on beta parameter</p></dd>

<dt><code>target</code></dt><dd><p>Target toxicity rate</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Create a new <code>Crm</code> object.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>A Crm object.</p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Examples</h4>
<p><div class="r example copy"></p><pre><span class='co'># An example verbatim from dfcrm::crm()</span>
<span class='va'>prior</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.05</span>, <span class='fl'>0.10</span>, <span class='fl'>0.20</span>, <span class='fl'>0.35</span>, <span class='fl'>0.50</span>, <span class='fl'>0.70</span><span class='op'>)</span>
<span class='va'>target</span> <span class='op'>&lt;-</span> <span class='fl'>0.2</span>
<span class='va'>level</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>4</span>, <span class='fl'>3</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>3</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>2</span><span class='op'>)</span>
<span class='va'>y</span>     <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>
<span class='va'>s</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>1.34</span><span class='op'>)</span>
<span class='va'>old</span> <span class='op'>&lt;-</span> <span class='fu'>dfcrm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/dfcrm/man/crm.html'>crm</a></span><span class='op'>(</span><span class='va'>prior</span>, <span class='va'>target</span>, <span class='va'>y</span>, <span class='va'>level</span><span class='op'>)</span>
<span class='va'>new</span> <span class='op'>&lt;-</span> <span class='va'>Crm</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>skeleton <span class='op'>=</span> <span class='va'>prior</span>, target <span class='op'>=</span> <span class='va'>target</span><span class='op'>)</span><span class='op'>$</span>
         <span class='fu'>dontcache</span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span>
         <span class='fu'>observe</span><span class='op'>(</span><span class='va'>level</span>, <span class='va'>y</span><span class='op'>)</span><span class='op'>$</span>
         <span class='fu'>est</span><span class='op'>(</span>impl<span class='op'>=</span><span class='st'>"rusti"</span>, abbrev<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
</pre><p></div></p>

<p><hr>
<a id="method-skeleton"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>skeleton()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>skeleton</span><span class='op'>(</span><span class='va'>skeleton</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>skeleton</code></dt><dd><p>A numeric vector to set as the model skeleton.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set or query CRM skeleton</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self (invisibly), unless <code>skeleton</code> is missing,
in which case the skeleton, a numeric vector, is returned.</p>
<p><hr>
<a id="method-dontcache"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>dontcache()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>dontcache</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set private cache to NULL; useful for performance testing</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-report"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>report()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>report</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Report lifetime duty &amp; performance statistics</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>A named vector summarizing lifetime duty and performance</p>
<p><hr>
<a id="method-stop_func"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>stop_func()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>stop_func</span><span class='op'>(</span><span class='va'>sfunc</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>sfunc</code></dt><dd><p>A function taking <code>mtd</code> objects to <code>mtd</code> objects,
attaching suitable stopping information</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set the stopping function</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-no_skip_esc"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>no_skip_esc()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>no_skip_esc</span><span class='op'>(</span><span class='va'>tf</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>tf</code></dt><dd><p>An atomic logical value, TRUE or FALSE</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set the <code>no_skip_esc</code> behavior</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-no_skip_deesc"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>no_skip_deesc()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>no_skip_deesc</span><span class='op'>(</span><span class='va'>tf</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>tf</code></dt><dd><p>An atomic logical value, TRUE or FALSE</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set the <code>no_skip_deesc</code> behavior</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-global_coherent_esc"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>global_coherent_esc()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>global_coherent_esc</span><span class='op'>(</span><span class='va'>tf</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>tf</code></dt><dd><p>An atomic logical value, TRUE or FALSE</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set the <code>global_coherent_esc</code> behavior</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-conf_level"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>conf_level()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>conf_level</span><span class='op'>(</span><span class='va'>conf</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>conf</code></dt><dd><p>A numeric confidence less than 1.0</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set the required confidence level for escalation decisions</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-observe"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>observe()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>observe</span><span class='op'>(</span><span class='va'>level</span>, <span class='va'>tox</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>level</code></dt><dd><p>A patient-wise vector of dose assignments</p></dd>

<dt><code>tox</code></dt><dd><p>A patient-wise vector of 0/1 toxicity assessments</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set patient-wise toxicity observations</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-tally"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>tally()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>tally</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>o</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>x</code></dt><dd><p>A dose-wise vector of toxicity counts</p></dd>

<dt><code>o</code></dt><dd><p>A dose-wise vector of non-toxicity counts</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set dose-wise toxicity observations</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-est"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>est()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>est</span><span class='op'>(</span><span class='va'>impl</span>, abbrev <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>impl</code></dt><dd><p>A string choosing the low-level implementation to use.
Possible values include <code>"dfcrm"</code>, <code>"rusti"</code> and <code>"ruste"</code>.</p></dd>

<dt><code>abbrev</code></dt><dd><p>Logical; if TRUE (the default), an abbreviated <code>mtd</code>
object is returned to save execution time. If FALSE, a complete object is
returned, suitable for regression testing against package <a href='https://CRAN.R-project.org/package=dfcrm'><span class="pkg">dfcrm</span></a>.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Set patient-wise toxicity observations</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>An object of class <code>mtd</code> as per package <a href='https://CRAN.R-project.org/package=dfcrm'><span class="pkg">dfcrm</span></a></p>
<p><hr>
<a id="method-applied"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>applied()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>applied</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>o</span>, last_dose <span class='op'>=</span> <span class='cn'>NA</span>, <span class='va'>...</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>x</code></dt><dd><p>A dose-wise vector of toxicity counts</p></dd>

<dt><code>o</code></dt><dd><p>A dose-wise vector of non-toxicity counts</p></dd>

<dt><code>last_dose</code></dt><dd><p>The most recently given dose, as required to implement
the <code>global_coherent_esc=TRUE</code> behavior</p></dd>

<dt><code>...</code></dt><dd><p>Parameters passed to <code>Crm$esc()</code>, enabling passthru
of required <code>impl</code> parameter and optional <code>abbrev</code> flag.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Return dose recommendation for given tox/no-tox tallies.</p>
<p>This function caches results, which greatly saves computation time
in DTP calculations. (It yields approximately a 5x speedup for the
VIOLA trial example!)</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>An object of class <code>mtd</code> as per package <a href='https://CRAN.R-project.org/package=dfcrm'><span class="pkg">dfcrm</span></a>,
or possibly an abbreviated version of such object as returned by
method <code>Crm$est()</code>.</p>
<p><hr>
<a id="method-trace_paths"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>trace_paths()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>trace_paths</span><span class='op'>(</span><span class='va'>root_dose</span>, <span class='va'>cohort_sizes</span>, <span class='va'>...</span>, unroll <span class='op'>=</span> <span class='fl'>4</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>root_dose</code></dt><dd><p>The starting dose for tree of paths</p></dd>

<dt><code>cohort_sizes</code></dt><dd><p>Integer vector giving sizes of future cohorts,
its length being the maximum number of cohorts to look ahead.</p></dd>

<dt><code>...</code></dt><dd><p>Parameters passed ultimately to <code>Crm$esc()</code>,
enabling passthru of its required <code>impl</code> parameter.</p></dd>

<dt><code>unroll</code></dt><dd><p>Integer; how deep to unroll path tree for parallelism</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Compute trial paths forward from current tally</p>
<p>The computed paths are saved in a private field, from which variously
formatted results may be obtained by accessor functions.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Self, invisibly</p>
<p><hr>
<a id="method-path_matrix"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>path_matrix()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>path_matrix</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Return computed trial paths in matrix form</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>An integer matrix with the same column layout as the
DTP tables of <a href='https://CRAN.R-project.org/package=dtpcrm'><span class="pkg">dtpcrm</span></a>. That is, there is a D0 column
followed by paired Tc, Dc columns giving the toxicity count
for cohort c and the resulting dose recommendation <em>yielded by</em>
cohort c -- which is generally the recommendation <em>for</em> cohort
c+1.</p>
<p><hr>
<a id="method-path_array"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>path_array()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>path_array</span><span class='op'>(</span>condense <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>condense</code></dt><dd><p>Logical value; if FALSE, the returned array has its
cohorts indexed trial-wise instead of dose-wise. This inflates the
array more than needed for the matrix computations it must support
(observe that in Norris2020c Eq. (4), the <code>c</code> index is eliminated
already by summation), but enables the sequence of events along a path
to be read off directly if this is required e.g. for visualization or
debugging. Default is TRUE.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Return computed trial paths in a 3D array</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>For the <code>j</code>'th path, the C*D matrix <code>T[j,,]</code> gives
the number of toxicities <code>T[j,c,d]</code> occurring in the <code>c</code>'th
cohort for dose d. In case <code>condense=FALSE</code>, see above.</p>
<p><hr>
<a id="method-path_probs"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>path_probs()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>path_probs</span><span class='op'>(</span><span class='va'>probs.DLT</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>probs.DLT</code></dt><dd><p>Numeric vector of DLT probabilities for the design's
pre-specified doses.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Path probabilities for given dose-wise DLT probs</p>
<p>The design's paths must already have been completely enumerated by
<code>trace_paths</code>, and the associated array <code>T</code>, matrix <code>U</code>
and vector <code>b</code> computed by a call to <code>path_array</code>.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>A vector of probabilities for the enumerated paths</p>
<p><hr>
<a id="method-path_rx"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>path_rx()</code></h3>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>path_rx</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Details</h4>
<p>Vector of path-wise final dose recommendations</p>
<p>The design's paths must already have been completely enumerated by
<code>trace_paths</code>. This method is a temporizing measure, bridging
to a new format for the return value of <code>path_matrix</code>, possibly
a <code>data.table</code> where the dose recs would be a column.</p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Returns</h4>
<p>Integer vector of final dose recs on the enumerated paths</p>
<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>Crm</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `Crm$new`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'># An example verbatim from dfcrm::crm()</span>
<span class='va'>prior</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.05</span>, <span class='fl'>0.10</span>, <span class='fl'>0.20</span>, <span class='fl'>0.35</span>, <span class='fl'>0.50</span>, <span class='fl'>0.70</span><span class='op'>)</span>
<span class='va'>target</span> <span class='op'>&lt;-</span> <span class='fl'>0.2</span>
<span class='va'>level</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>4</span>, <span class='fl'>3</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>3</span>, <span class='fl'>2</span>, <span class='fl'>2</span>, <span class='fl'>2</span><span class='op'>)</span>
<span class='va'>y</span>     <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>0</span>, <span class='fl'>0</span>, <span class='fl'>0</span><span class='op'>)</span>
<span class='va'>s</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>1.34</span><span class='op'>)</span>
<span class='va'>old</span> <span class='op'>&lt;-</span> <span class='fu'>dfcrm</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/dfcrm/man/crm.html'>crm</a></span><span class='op'>(</span><span class='va'>prior</span>, <span class='va'>target</span>, <span class='va'>y</span>, <span class='va'>level</span><span class='op'>)</span>
<span class='va'>new</span> <span class='op'>&lt;-</span> <span class='va'>Crm</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>skeleton <span class='op'>=</span> <span class='va'>prior</span>, target <span class='op'>=</span> <span class='va'>target</span><span class='op'>)</span><span class='op'>$</span>
         <span class='fu'>dontcache</span><span class='op'>(</span><span class='op'>)</span><span class='op'>$</span>
         <span class='fu'>observe</span><span class='op'>(</span><span class='va'>level</span>, <span class='va'>y</span><span class='op'>)</span><span class='op'>$</span>
         <span class='fu'>est</span><span class='op'>(</span>impl<span class='op'>=</span><span class='st'>"rusti"</span>, abbrev<span class='op'>=</span><span class='cn'>FALSE</span><span class='op'>)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David C. Norris.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


